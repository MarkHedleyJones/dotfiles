#!/usr/bin/env bash

if [ $# -ne 1 ];
then
  echo "Usage: $(basename $0) PATH"
  exit 1
fi

files_to_check=($(find ${1} \( -name repos -o -name build -o -name pcl \) -prune -o \( -name '*.cpp' -o -name '*.h' \) -print))

echo "Running roslint (from ROS)"
for file_path in ${files_to_check[*]}; do
  cpplint ${file_path}
done

echo "Running format-lint"
for file_path in ${files_to_check[*]}; do
  format-lint ${file_path}
done
